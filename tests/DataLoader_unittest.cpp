#include "../include/linear-regression-from-scratch-cpp/DataLoader/DataLoader.h"
#include <iostream>

void CSVload_test() {
    std::vector<double> OutputData;
    std::vector<std::vector<double>> InputData;
    std::string filename = "data/training.csv";
    TDataLoader loader;
    loader.CSVload(filename, InputData, OutputData);

    std::vector<double> expected_OutputData = {
    45.2, 118.5, 32.1, 148.7, 61.2, 16.5, 131.0, 93.4, 51.8, 30.5,
    124.2, 68.6, 57.3, 157.8, 43.5, 87.2, 24.2, 102.1, 116.3, 164.0,
    73.5, 46.8, 138.2, 18.4, 65.1, 153.5, 83.4, 107.2, 55.3, 36.8,
    121.5, 97.0, 76.8, 146.2, 27.1, 62.9, 168.4, 100.1, 49.8, 33.2,
    114.1, 90.8, 41.5, 151.2, 21.3, 67.4, 161.2, 81.1, 111.5, 53.1,
    126.8, 71.4, 45.3, 166.2, 23.8, 60.5, 155.5, 89.1, 118.2, 56.5,
    34.8, 122.5, 98.6, 75.4, 143.5, 28.5, 63.5, 171.0, 103.5, 50.8,
    38.2, 115.8, 92.5, 43.1, 148.5, 22.4, 66.2, 159.5, 82.8, 109.8,
    54.2, 128.5, 72.8, 46.1, 167.8, 24.5, 62.2, 156.5, 90.2, 119.5,
    55.8, 35.8, 123.5, 100.8, 77.4, 147.5, 27.8, 64.8, 170.1, 104.5
    };

    std::vector<std::vector<double>> expected_InputData = {
    {15, 8, 120}, {65, 22, 350}, {8, 4, 55}, {85, 28, 420}, {25, 12, 180},
    {5, 3, 40}, {75, 25, 380}, {50, 18, 280}, {18, 10, 140}, {10, 6, 75},
    {70, 24, 360}, {32, 13, 210}, {22, 11, 165}, {95, 30, 450}, {14, 8, 130},
    {45, 17, 260}, {8, 5, 70}, {58, 20, 310}, {68, 23, 340}, {92, 32, 480},
    {38, 14, 230}, {16, 9, 145}, {80, 27, 400}, {6, 4, 50}, {28, 12, 190},
    {90, 29, 435}, {42, 16, 250}, {62, 21, 325}, {20, 11, 155}, {11, 7, 105},
    {72, 24, 370}, {52, 19, 295}, {35, 14, 220}, {85, 28, 415}, {9, 5, 80},
    {26, 12, 185}, {98, 33, 495}, {55, 19, 305}, {17, 9, 140}, {10, 6, 90},
    {67, 22, 335}, {48, 17, 275}, {14, 8, 125}, {87, 29, 440}, {7, 4, 60},
    {30, 13, 205}, {94, 31, 470}, {41, 15, 245}, {64, 21, 330}, {19, 10, 150},
    {74, 25, 375}, {36, 13, 215}, {15, 8, 135}, {96, 32, 490}, {8, 5, 75},
    {24, 11, 175}, {91, 30, 445}, {46, 17, 270}, {69, 23, 345}, {21, 10, 160},
    {11, 6, 100}, {71, 24, 365}, {54, 18, 300}, {34, 14, 225}, {83, 27, 410},
    {9, 5, 85}, {27, 12, 195}, {99, 33, 500}, {60, 20, 315}, {18, 9, 148},
    {12, 7, 112}, {66, 22, 338}, {49, 18, 285}, {13, 8, 128}, {86, 28, 425},
    {7, 4, 65}, {29, 13, 200}, {93, 31, 465}, {43, 16, 255}, {63, 21, 328},
    {20, 10, 152}, {76, 26, 385}, {37, 14, 222}, {16, 9, 142}, {97, 32, 492},
    {8, 5, 78}, {25, 12, 182}, {90, 29, 455}, {47, 17, 278}, {70, 23, 355},
    {20, 10, 158}, {11, 6, 108}, {73, 24, 378}, {56, 19, 308}, {33, 15, 228},
    {84, 27, 418}, {10, 5, 88}, {28, 13, 198}, {95, 33, 498}, {61, 20, 320}
    };

    if (expected_InputData == InputData && expected_OutputData == OutputData) {
        std::cout << "\033[1m" <<"\033[32m" << "\n[1]DataLoader_unittest test passed successfully!" << "\033[0m" << std::endl;
    } else {
        std::cerr << "\033[1m" << "\033[41m" << "\n[1]DataLoader_unittest test failed!" << "\033[0m" << std::endl;
    }
}

int main() {
    
    CSVload_test();

    return 0;
}
